<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Bajere" />
  <meta name="theme-color" content="#0a0a0f" />
  <title>Hvor mange genstande?</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --gold: #d4af37;
      --gold-light: #f4d03f;
      --gold-dark: #b8860b;
      --bg: #0a0a0f;
      --text: #ffffff;
      --text-sub: rgba(255,255,255,0.65);
      --text-muted: rgba(255,255,255,0.4);
      --border: rgba(212,175,55,0.22);
      --glass: rgba(255,255,255,0.055);
      --glass-border: rgba(255,255,255,0.1);
    }

    *, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }

    html, body {
      height: 100%;
      overflow: hidden;
      background: var(--bg);
      color: var(--text);
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      -webkit-font-smoothing: antialiased;
      -webkit-tap-highlight-color: transparent;
      user-select: none;
    }

    /* â”€â”€ Background glow â”€â”€ */
    .bg-glow {
      position: fixed; inset: 0; z-index: 0; pointer-events: none;
      background:
        radial-gradient(ellipse 70% 50% at 20% 10%, rgba(212,175,55,.09) 0%, transparent 70%),
        radial-gradient(ellipse 60% 60% at 80% 90%, rgba(212,175,55,.06) 0%, transparent 70%);
      animation: glowShift 18s ease-in-out infinite alternate;
    }
    @keyframes glowShift {
      0%   { opacity: 1; transform: scale(1) translate(0,0); }
      100% { opacity: .8; transform: scale(1.08) translate(1%, 1.5%); }
    }

    /* â”€â”€ Dot progress â”€â”€ */
    .dots {
      position: fixed;
      top: calc(18px + env(safe-area-inset-top));
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      z-index: 200;
      opacity: 0;
      transition: opacity .3s;
    }
    .dots.visible { opacity: 1; }
    .dot {
      width: 8px; height: 8px;
      border-radius: 50%;
      background: var(--glass-border);
      transition: background .4s, transform .4s;
      cursor: pointer;
    }
    .dot:active { transform: scale(1.3); }
    .dot.active {
      background: var(--gold);
      transform: scale(1.3);
      box-shadow: 0 0 8px var(--gold);
    }
    .dot.done {
      background: rgba(212,175,55,.5);
    }

    /* â”€â”€ Lock button â”€â”€ */
    .lock-btn {
      position: fixed;
      top: calc(12px + env(safe-area-inset-top));
      right: 20px;
      z-index: 200;
      width: 36px; height: 36px;
      border-radius: 50%;
      background: var(--glass);
      border: 1px solid var(--glass-border);
      color: var(--text-muted);
      display: none;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: color .2s, border-color .2s;
    }
    .lock-btn.visible { display: flex; }
    .lock-btn:active { color: var(--gold); border-color: var(--gold); }

    /* â”€â”€ Screen container â”€â”€ */
    .screens {
      position: fixed; inset: 0; z-index: 10;
      overflow: hidden;
    }

    /* â”€â”€ Each screen â”€â”€ */
    .screen {
      position: absolute; inset: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 32px 28px;
      padding-top: calc(72px + env(safe-area-inset-top));
      padding-bottom: calc(32px + env(safe-area-inset-bottom));
      transform: translateX(100%) scale(.96);
      opacity: 0;
      pointer-events: none;
    }
    .screen.slide-in {
      transition: transform .42s cubic-bezier(.32,.72,0,1), opacity .42s cubic-bezier(.32,.72,0,1);
      transform: translateX(0) scale(1);
      opacity: 1;
      pointer-events: auto;
    }
    .screen.slide-out-left {
      transition: transform .38s cubic-bezier(.4,0,.6,1), opacity .38s cubic-bezier(.4,0,.6,1);
      transform: translateX(-28%) scale(.93);
      opacity: 0;
      pointer-events: none;
    }
    .screen.slide-out-right {
      transition: transform .38s cubic-bezier(.4,0,.6,1), opacity .38s cubic-bezier(.4,0,.6,1);
      transform: translateX(100%) scale(.96);
      opacity: 0;
      pointer-events: none;
    }
    .screen.enter-from-left {
      transform: translateX(-28%) scale(.93);
      opacity: 0;
    }

    /* â”€â”€ Screen content â”€â”€ */
    .screen-content {
      width: 100%;
      max-width: 380px;
      text-align: center;
    }

    .screen.slide-in .screen-content > * {
      animation: fadeUp .45s cubic-bezier(.22,.68,0,1.2) both;
    }
    .screen.slide-in .screen-content > *:nth-child(1) { animation-delay: .08s; }
    .screen.slide-in .screen-content > *:nth-child(2) { animation-delay: .14s; }
    .screen.slide-in .screen-content > *:nth-child(3) { animation-delay: .20s; }
    .screen.slide-in .screen-content > *:nth-child(4) { animation-delay: .26s; }
    .screen.slide-in .screen-content > *:nth-child(5) { animation-delay: .30s; }
    .screen.slide-in .screen-content > *:nth-child(6) { animation-delay: .34s; }
    .screen.slide-in .screen-content > *:nth-child(7) { animation-delay: .38s; }
    .screen.slide-in .screen-content > *:nth-child(8) { animation-delay: .42s; }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(16px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* â”€â”€ Screen Icon â”€â”€ */
    .icon {
      width: 76px; height: 76px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%);
      margin: 0 auto 28px;
      display: flex; align-items: center; justify-content: center;
      font-size: 38px;
      box-shadow: 0 8px 32px rgba(212,175,55,.28);
      animation: iconPulse 3s ease-in-out infinite;
    }
    @keyframes iconPulse {
      0%,100% { box-shadow: 0 8px 32px rgba(212,175,55,.28); }
      50%      { box-shadow: 0 8px 48px rgba(212,175,55,.45); }
    }

    /* â”€â”€ Titles â”€â”€ */
    .title {
      font-family: 'Playfair Display', serif;
      font-size: 30px;
      font-weight: 600;
      margin-bottom: 10px;
      background: linear-gradient(135deg, #fff 0%, var(--gold-light) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .subtitle {
      font-size: 15px;
      color: var(--text-sub);
      margin-bottom: 36px;
      line-height: 1.55;
      font-weight: 300;
    }

    /* â”€â”€ Inputs â”€â”€ */
    .field-wrap { margin-bottom: 20px; }
    .field-label {
      display: block;
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 1.2px;
      text-transform: uppercase;
      color: var(--text-muted);
      margin-bottom: 10px;
    }
    .field {
      width: 100%;
      padding: 22px 24px;
      font-size: 28px;
      font-weight: 500;
      font-family: 'Inter', sans-serif;
      text-align: center;
      background: var(--glass);
      border: 1.5px solid var(--border);
      border-radius: 22px;
      color: var(--text);
      outline: none;
      transition: border-color .25s, box-shadow .25s, background .25s;
      -webkit-appearance: none;
    }
    .field::placeholder { color: var(--text-muted); font-weight: 400; }
    .field:focus {
      border-color: var(--gold);
      box-shadow: 0 0 0 4px rgba(212,175,55,.14);
      background: rgba(255,255,255,.08);
    }
    .hint { font-size: 12px; color: var(--text-muted); margin-top: 10px; }

    .two-col { display: flex; gap: 14px; margin-bottom: 20px; }
    .two-col .field-wrap { flex: 1; margin-bottom: 0; }
    .two-col .field { font-size: 22px; padding: 18px 16px; }

    .food-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 16px; }
    .food-cell {
      background: var(--glass);
      border: 1.5px solid var(--border);
      border-radius: 18px;
      padding: 16px 12px 14px;
      transition: border-color .25s;
    }
    .food-cell:focus-within { border-color: var(--gold); }
    .food-cell label {
      display: block;
      font-size: 11px;
      font-weight: 500;
      letter-spacing: .8px;
      text-transform: uppercase;
      color: var(--text-muted);
      margin-bottom: 8px;
    }
    .food-cell input {
      width: 100%;
      background: transparent;
      border: none;
      font-size: 26px;
      font-weight: 600;
      font-family: 'Inter', sans-serif;
      color: var(--text);
      text-align: center;
      outline: none;
      -webkit-appearance: none;
    }
    .food-cell input::placeholder { color: var(--text-muted); font-weight: 400; }
    .small-field { font-size: 20px !important; padding: 16px 20px !important; }

    /* â”€â”€ Buttons â”€â”€ */
    .btn {
      font-family: 'Inter', sans-serif;
      font-weight: 600;
      font-size: 17px;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      transition: transform .15s, opacity .15s, box-shadow .2s;
      display: block;
      width: 100%;
      padding: 20px;
      -webkit-appearance: none;
    }
    .btn:active { transform: scale(.97); opacity: .92; }
    .btn-gold {
      background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%);
      color: var(--bg);
      box-shadow: 0 6px 24px rgba(212,175,55,.3);
    }
    .btn-gold:active { box-shadow: 0 2px 10px rgba(212,175,55,.2); }
    .btn-ghost {
      background: var(--glass);
      border: 1.5px solid var(--glass-border);
      color: var(--text-sub);
    }
    .btn-row { display: flex; gap: 12px; margin-top: 28px; }
    .btn-row .btn-gold { flex: 1; }
    .btn-back {
      flex: none !important;
      width: 56px !important;
      padding: 0 !important;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
    }

    /* â”€â”€ Error â”€â”€ */
    .err {
      color: #ff6b72;
      font-size: 13px;
      margin-top: 14px;
      display: none;
      animation: shake .45s ease;
    }
    .err.show { display: block; }
    @keyframes shake {
      0%,100% { transform: translateX(0); }
      20%,60%  { transform: translateX(-6px); }
      40%,80%  { transform: translateX(6px); }
    }

    /* â”€â”€ Result screen â”€â”€ */
    .result-num {
      font-family: 'Playfair Display', serif;
      font-size: 100px;
      font-weight: 700;
      line-height: 1;
      margin-bottom: 4px;
      background: linear-gradient(135deg, var(--gold-light) 0%, var(--gold) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .result-unit { font-size: 22px; color: var(--text-sub); margin-bottom: 16px; }
    .result-raw { font-size: 13px; color: var(--text-muted); margin-bottom: 12px; }

    /* â”€â”€ Tier badge â”€â”€ */
    .tier-badge {
      display: inline-block;
      background: linear-gradient(135deg, rgba(212,175,55,.2) 0%, rgba(212,175,55,.08) 100%);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 12px 20px;
      margin-bottom: 28px;
    }
    .tier-name {
      font-size: 14px;
      font-weight: 600;
      color: var(--gold-light);
      margin-bottom: 4px;
    }
    .tier-desc {
      font-size: 12px;
      color: var(--text-sub);
      line-height: 1.4;
    }

    .edit-link {
      margin-top: 16px;
      font-size: 14px;
      color: var(--text-muted);
      text-decoration: underline;
      cursor: pointer;
      display: inline-block;
    }

    /* â”€â”€ Step Picker Modal â”€â”€ */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.7);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      z-index: 500;
      opacity: 0;
      pointer-events: none;
      transition: opacity .3s ease;
    }
    .modal-overlay.show {
      opacity: 1;
      pointer-events: auto;
    }
    .modal {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(180deg, #1a1a24 0%, #0f0f14 100%);
      border-radius: 28px 28px 0 0;
      padding: 24px 24px calc(24px + env(safe-area-inset-bottom));
      z-index: 501;
      transform: translateY(100%);
      transition: transform .4s cubic-bezier(.32,.72,0,1);
    }
    .modal-overlay.show .modal {
      transform: translateY(0);
    }
    .modal-handle {
      width: 40px;
      height: 4px;
      background: rgba(255,255,255,.2);
      border-radius: 2px;
      margin: 0 auto 20px;
    }
    .modal-title {
      font-family: 'Playfair Display', serif;
      font-size: 22px;
      font-weight: 600;
      text-align: center;
      margin-bottom: 20px;
      color: var(--gold-light);
    }
    .step-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .step-item {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 16px 20px;
      background: var(--glass);
      border: 1.5px solid var(--border);
      border-radius: 16px;
      cursor: pointer;
      transition: border-color .2s, background .2s, transform .15s;
    }
    .step-item:active {
      transform: scale(.98);
      border-color: var(--gold);
      background: rgba(212,175,55,.1);
    }
    .step-icon {
      font-size: 24px;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(212,175,55,.15);
      border-radius: 12px;
    }
    .step-info { flex: 1; text-align: left; }
    .step-name { font-size: 15px; font-weight: 500; color: var(--text); }
    .step-value { font-size: 12px; color: var(--text-muted); margin-top: 2px; }
    .step-arrow { color: var(--text-muted); font-size: 18px; }

    .modal-close {
      margin-top: 16px;
      padding: 16px;
      width: 100%;
      background: transparent;
      border: 1.5px solid var(--glass-border);
      border-radius: 14px;
      color: var(--text-sub);
      font-size: 15px;
      font-weight: 500;
      cursor: pointer;
      transition: border-color .2s;
    }
    .modal-close:active { border-color: var(--gold); }

    /* â”€â”€ Swipe hint â”€â”€ */
    .swipe-hint {
      position: fixed;
      bottom: calc(16px + env(safe-area-inset-bottom));
      left: 50%;
      transform: translateX(-50%);
      font-size: 11px;
      color: var(--text-muted);
      z-index: 200;
      opacity: 0;
      transition: opacity .4s;
      pointer-events: none;
    }
    .swipe-hint.show { opacity: 1; }

    audio { display: none; }

    /* â”€â”€ Responsive â”€â”€ */
    @media (max-height: 700px) {
      .icon { width: 60px; height: 60px; font-size: 30px; margin-bottom: 20px; }
      .title { font-size: 24px; }
      .subtitle { font-size: 14px; margin-bottom: 24px; }
      .field { padding: 16px 20px; font-size: 24px; border-radius: 18px; }
      .btn { padding: 17px; }
      .result-num { font-size: 80px; }
      .tier-badge { padding: 10px 16px; margin-bottom: 20px; }
    }
    @media (max-height: 600px) {
      .icon { width: 50px; height: 50px; font-size: 26px; margin-bottom: 14px; }
      .title { font-size: 20px; }
      .subtitle { font-size: 13px; margin-bottom: 18px; }
      .field { padding: 14px 16px; font-size: 20px; }
      .result-num { font-size: 64px; }
    }
  </style>
</head>
<body>
  <div class="bg-glow"></div>
  <audio id="unlockSound" src="shitbro.mp3" preload="auto"></audio>

  <!-- Dot progress (clickable) -->
  <div class="dots" id="dots">
    <div class="dot" data-step="1"></div>
    <div class="dot" data-step="2"></div>
    <div class="dot" data-step="3"></div>
    <div class="dot" data-step="4"></div>
    <div class="dot" data-step="5"></div>
  </div>

  <!-- Lock -->
  <button class="lock-btn" id="lockBtn" aria-label="LÃ¥s">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2">
      <rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/>
    </svg>
  </button>

  <!-- Swipe hint -->
  <div class="swipe-hint" id="swipeHint">Swipe eller tryk pÃ¥ dots for at navigere</div>

  <!-- Step Picker Modal -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal" id="stepModal">
      <div class="modal-handle"></div>
      <h2 class="modal-title">Ret dine svar</h2>
      <div class="step-list" id="stepList">
        <div class="step-item" data-goto="1">
          <div class="step-icon">ğŸ»</div>
          <div class="step-info">
            <div class="step-name">Alkoholprocent</div>
            <div class="step-value" id="val-vol">Ikke udfyldt</div>
          </div>
          <div class="step-arrow">â†’</div>
        </div>
        <div class="step-item" data-goto="2">
          <div class="step-icon">â°</div>
          <div class="step-info">
            <div class="step-name">MÃ¸detid</div>
            <div class="step-value" id="val-time">Ikke udfyldt</div>
          </div>
          <div class="step-arrow">â†’</div>
        </div>
        <div class="step-item" data-goto="3">
          <div class="step-icon">ğŸ˜´</div>
          <div class="step-info">
            <div class="step-name">SÃ¸vn</div>
            <div class="step-value" id="val-sleep">Ikke udfyldt</div>
          </div>
          <div class="step-arrow">â†’</div>
        </div>
        <div class="step-item" data-goto="4">
          <div class="step-icon">ğŸ–</div>
          <div class="step-info">
            <div class="step-name">Mad</div>
            <div class="step-value" id="val-food">Ikke udfyldt</div>
          </div>
          <div class="step-arrow">â†’</div>
        </div>
        <div class="step-item" data-goto="5">
          <div class="step-icon">ğŸ’§</div>
          <div class="step-info">
            <div class="step-name">Vand</div>
            <div class="step-value" id="val-water">Ikke udfyldt</div>
          </div>
          <div class="step-arrow">â†’</div>
        </div>
      </div>
      <button class="modal-close" id="modalClose">Annuller</button>
    </div>
  </div>

  <div class="screens" id="screens">

    <!-- â–‘ LOGIN â–‘ -->
    <div class="screen slide-in" id="s-login">
      <div class="screen-content">
        <div class="icon">ğŸº</div>
        <h1 class="title">Dav Fyr</h1>
        <p class="subtitle">Indtast din adgangskode for at fortsÃ¦tte</p>
        <div class="field-wrap">
          <input class="field" type="password" id="pw" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" autocomplete="off" />
        </div>
        <button class="btn btn-gold" id="unlockBtn">LÃ¥s op</button>
        <p class="err" id="pwErr">Forkert adgangskode. PrÃ¸v igen.</p>
      </div>
    </div>

    <!-- â–‘ 1 Â· Vol% â–‘ -->
    <div class="screen" id="s-1">
      <div class="screen-content">
        <div class="icon">ğŸ»</div>
        <h1 class="title">Alkohol&shy;procent</h1>
        <p class="subtitle">Hvad er den gennemsnitlige Vol% pÃ¥ det du drikker i aften?</p>
        <div class="field-wrap">
          <input class="field" id="vol" type="text" inputmode="decimal" placeholder="5.0" />
          <p class="hint">F.eks. 4.6 for en klassisk pilsner</p>
        </div>
        <div class="btn-row">
          <button class="btn btn-gold" id="n1">NÃ¦ste â†’</button>
        </div>
      </div>
    </div>

    <!-- â–‘ 2 Â· MÃ¸detid â–‘ -->
    <div class="screen" id="s-2">
      <div class="screen-content">
        <div class="icon">â°</div>
        <h1 class="title">MÃ¸detid</h1>
        <p class="subtitle">HvornÃ¥r skal du mÃ¸de ind pÃ¥ kontoret i morgen?</p>
        <div class="two-col">
          <div class="field-wrap">
            <label class="field-label">Time</label>
            <input class="field" id="ath" type="text" inputmode="numeric" placeholder="9" />
          </div>
          <div class="field-wrap">
            <label class="field-label">Minut</label>
            <input class="field" id="atm" type="text" inputmode="numeric" placeholder="00" />
          </div>
        </div>
        <div class="btn-row">
          <button class="btn btn-ghost btn-back" id="b2">â†</button>
          <button class="btn btn-gold" id="n2">NÃ¦ste â†’</button>
        </div>
      </div>
    </div>

    <!-- â–‘ 3 Â· SÃ¸vn â–‘ -->
    <div class="screen" id="s-3">
      <div class="screen-content">
        <div class="icon">ğŸ˜´</div>
        <h1 class="title">SÃ¸vn</h1>
        <p class="subtitle">Hvor mange timer regner du med at sove i nat?</p>
        <div class="field-wrap">
          <input class="field" id="sleep" type="text" inputmode="decimal" placeholder="7" />
          <p class="hint">Timer fra du lÃ¦gger dig til du stÃ¥r op</p>
        </div>
        <div class="btn-row">
          <button class="btn btn-ghost btn-back" id="b3">â†</button>
          <button class="btn btn-gold" id="n3">NÃ¦ste â†’</button>
        </div>
      </div>
    </div>

    <!-- â–‘ 4 Â· Mad â–‘ -->
    <div class="screen" id="s-4">
      <div class="screen-content">
        <div class="icon">ğŸ–</div>
        <h1 class="title">Mad</h1>
        <p class="subtitle">Hvad har du spist i dag?</p>
        <div class="food-grid">
          <div class="food-cell">
            <label>KÃ¸d</label>
            <input id="meat" type="text" inputmode="decimal" placeholder="0" />
          </div>
          <div class="food-cell">
            <label>BrÃ¸d</label>
            <input id="bread" type="text" inputmode="decimal" placeholder="0" />
          </div>
          <div class="food-cell">
            <label>GrÃ¸nt</label>
            <input id="greens" type="text" inputmode="decimal" placeholder="0" />
          </div>
          <div class="food-cell">
            <label>Frugt</label>
            <input id="fruit" type="text" inputmode="decimal" placeholder="0" />
          </div>
        </div>
        <div class="field-wrap">
          <label class="field-label">Flydende kost</label>
          <input class="field small-field" id="liquid" type="text" inputmode="decimal" placeholder="0" />
        </div>
        <div class="btn-row">
          <button class="btn btn-ghost btn-back" id="b4">â†</button>
          <button class="btn btn-gold" id="n4">NÃ¦ste â†’</button>
        </div>
      </div>
    </div>

    <!-- â–‘ 5 Â· Vand â–‘ -->
    <div class="screen" id="s-5">
      <div class="screen-content">
        <div class="icon">ğŸ’§</div>
        <h1 class="title">Vand</h1>
        <p class="subtitle">Hvor mange glas vand drikker du i aften?</p>
        <div class="field-wrap">
          <input class="field" id="water" type="text" inputmode="decimal" placeholder="0" />
          <p class="hint">1 glas â‰ˆ 200 ml</p>
        </div>
        <div class="btn-row">
          <button class="btn btn-ghost btn-back" id="b5">â†</button>
          <button class="btn btn-gold" id="n5">Beregn ğŸº</button>
        </div>
      </div>
    </div>

    <!-- â–‘ RESULT â–‘ -->
    <div class="screen" id="s-result">
      <div class="screen-content">
        <div class="icon" id="resultIcon">ğŸ‰</div>
        <div class="result-num" id="resNum">0</div>
        <div class="result-unit">genstande</div>
        <div class="result-raw" id="resRaw"></div>
        <div class="tier-badge">
          <div class="tier-name" id="tierName">-</div>
          <div class="tier-desc" id="tierDesc">-</div>
        </div>
        <button class="btn btn-gold" id="restartBtn">PrÃ¸v igen</button>
        <span class="edit-link" id="editBtn">Ret mine svar</span>
      </div>
    </div>

  </div>

  <script>
  (() => {
    const PASS = "bajerforfandenda";
    const KEY  = "hobby_calc_unlocked";

    const ORDER = ['login','1','2','3','4','5','result'];
    let current = 'login';
    let fromResult = false; // Track if we came from result screen

    const $ = id => document.getElementById(id);

    // â”€â”€ Tiers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const TIERS = [
      { max: 1,  icon: 'ğŸ‘¶', name: 'Infant', desc: 'Bruh bare bliv hjemme, hvad fanden laver du ude?' },
      { max: 4,  icon: 'ğŸ’ª', name: 'Gym-bro', desc: 'Respekt for at du passer pÃ¥ din krop bro' },
      { max: 5,  icon: 'ğŸ˜', name: 'Just a regular type dude', desc: 'Fed indstilling' },
      { max: 7,  icon: 'ğŸ·', name: 'Experienced alcoholic', desc: 'Du er sÃ¥ cool man' },
      { max: 9,  icon: 'ğŸ’Š', name: 'Antabus-tier', desc: 'Enten er du arbejdslÃ¸s eller bare en funktionel alkoholiker' },
      { max: Infinity, icon: 'ğŸ¦‡', name: "Glostrups Batman", desc: 'Du er udÃ¸delig og sÃ¥ lÃ¦kker altsÃ¥' }
    ];

    function getTier(n) {
      for (const t of TIERS) {
        if (n <= t.max) return t;
      }
      return TIERS[TIERS.length - 1];
    }

    // â”€â”€ Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function parseNum(v) {
      const s = String(v ?? '').trim().replace(/\s+/g,'').replace(',','.');
      if (!s) return null;
      const n = Number(s);
      return isFinite(n) ? n : null;
    }

    function roundHalf(x) {
      if (!isFinite(x)) return NaN;
      return x >= 0 ? Math.floor(x + .5) : Math.ceil(x - .5);
    }

    // â”€â”€ Calculation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function calc() {
      const vRaw   = parseNum($('vol').value)    || 0;
      const ath    = parseNum($('ath').value)    || 0;
      const atm    = parseNum($('atm').value)    || 0;
      const sleep  = parseNum($('sleep').value)  || 0;
      const meat   = parseNum($('meat').value)   || 0;
      const bread  = parseNum($('bread').value)  || 0;
      const greens = parseNum($('greens').value) || 0;
      const fruit  = parseNum($('fruit').value)  || 0;
      const liquid = parseNum($('liquid').value) || 0;
      const water  = parseNum($('water').value)  || 0;

      const v = vRaw > 1 ? vRaw / 100 : vRaw;
      if (v <= 0) return { result: 0, raw: 0 };

      const D7 = .06 / v;
      const F10 = ((ath - 9) + 9/9 - 1) + atm/60;
      const B8 = (5 + F10) + (sleep - 7) / 2;
      const K8 = (meat*1-1) + (bread*.2-1) + (greens*.15-1) + (fruit*.1-1) + (liquid*.2-1);
      const B11 = (B8 + K8 + (water/3 - 1)) * D7;

      return { result: roundHalf(B11), raw: Math.round(B11 * 100) / 100 };
    }

    // â”€â”€ Animated counter â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function animateNumber(el, target) {
      const duration = 900;
      const start = performance.now();
      function frame(now) {
        const t = Math.min((now - start) / duration, 1);
        const ease = 1 - Math.pow(1 - t, 3);
        el.textContent = Math.round(target * ease);
        if (t < 1) requestAnimationFrame(frame);
      }
      requestAnimationFrame(frame);
    }

    // â”€â”€ Screen transition â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function go(to, dir = 'forward') {
      if (to === current) return;
      document.activeElement?.blur();

      const fromEl = $('s-' + current);
      const toEl   = $('s-' + to);

      [fromEl, toEl].forEach(e => {
        e.classList.remove('slide-in','slide-out-left','slide-out-right','enter-from-left');
      });

      if (dir === 'forward') {
        fromEl.classList.add('slide-out-left');
        toEl.classList.add('slide-in');
      } else {
        fromEl.classList.add('slide-out-right');
        toEl.classList.add('enter-from-left');
        requestAnimationFrame(() => {
          requestAnimationFrame(() => {
            toEl.classList.remove('enter-from-left');
            toEl.classList.add('slide-in');
          });
        });
      }

      current = to;
      updateChrome();

      setTimeout(() => {
        const inp = toEl.querySelector('input');
        if (inp && to !== 'login' && to !== 'result') inp.focus();
      }, 420);
    }

    // â”€â”€ Update chrome (dots, etc) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function updateChrome() {
      const dotsEl  = $('dots');
      const lockBtn = $('lockBtn');
      const hint    = $('swipeHint');
      const isApp   = current !== 'login' && current !== 'result';
      const stepNum = parseInt(current);

      dotsEl.classList.toggle('visible', current !== 'login');
      lockBtn.classList.toggle('visible', current !== 'login');

      if (current === '1' && !fromResult) {
        hint.classList.add('show');
        setTimeout(() => hint.classList.remove('show'), 2500);
      }

      document.querySelectorAll('.dot').forEach(d => {
        const s = parseInt(d.dataset.step);
        d.classList.remove('active','done');
        if (current === 'result') {
          d.classList.add('done');
        } else if (s === stepNum) {
          d.classList.add('active');
        } else if (s < stepNum) {
          d.classList.add('done');
        }
      });
    }

    // â”€â”€ Dot click navigation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.querySelectorAll('.dot').forEach(d => {
      d.addEventListener('click', () => {
        const target = d.dataset.step;
        if (current === 'login') return;
        const curIdx = ORDER.indexOf(current);
        const targetIdx = ORDER.indexOf(target);
        if (targetIdx < curIdx) {
          go(target, 'back');
        } else if (targetIdx > curIdx) {
          go(target, 'forward');
        }
      });
    });

    // â”€â”€ Swipe gesture â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    let touchX0 = null, touchY0 = null, swiping = false;

    document.addEventListener('touchstart', e => {
      touchX0 = e.touches[0].clientX;
      touchY0 = e.touches[0].clientY;
      swiping = false;
    }, { passive: true });

    document.addEventListener('touchmove', e => {
      if (touchX0 === null) return;
      const dx = e.touches[0].clientX - touchX0;
      const dy = e.touches[0].clientY - touchY0;
      if (!swiping && Math.abs(dx) > Math.abs(dy) && Math.abs(dx) > 8) {
        swiping = true;
      }
    }, { passive: true });

    document.addEventListener('touchend', e => {
      if (!swiping || touchX0 === null) { touchX0 = null; return; }
      const dx = e.changedTouches[0].clientX - touchX0;
      touchX0 = null; swiping = false;

      if (current === 'login') return;
      if (document.activeElement?.tagName === 'INPUT') return;

      const idx = ORDER.indexOf(current);
      if (dx < -50 && idx < ORDER.length - 2 && current !== 'result') {
        go(ORDER[idx + 1], 'forward');
      } else if (dx > 50 && idx > 1) {
        go(ORDER[idx - 1], 'back');
      }
    });

    // â”€â”€ Modal functions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function openModal() {
      // Update values in modal
      const vol = $('vol').value || '-';
      const ath = $('ath').value || '-';
      const atm = $('atm').value || '00';
      const sleep = $('sleep').value || '-';
      const water = $('water').value || '-';
      const meat = $('meat').value || '0';
      const bread = $('bread').value || '0';

      $('val-vol').textContent = vol !== '-' ? vol + ' %' : 'Ikke udfyldt';
      $('val-time').textContent = ath !== '-' ? `Kl. ${ath}:${atm.padStart(2,'0')}` : 'Ikke udfyldt';
      $('val-sleep').textContent = sleep !== '-' ? sleep + ' timer' : 'Ikke udfyldt';
      $('val-food').textContent = (meat !== '0' || bread !== '0') ? 'Udfyldt' : 'Ikke udfyldt';
      $('val-water').textContent = water !== '-' && water !== '0' ? water + ' glas' : 'Ikke udfyldt';

      $('modalOverlay').classList.add('show');
    }

    function closeModal() {
      $('modalOverlay').classList.remove('show');
    }

    // â”€â”€ Step picker item clicks â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.querySelectorAll('.step-item').forEach(item => {
      item.addEventListener('click', () => {
        const target = item.dataset.goto;
        closeModal();
        setTimeout(() => {
          fromResult = true;
          go(target, 'back');
        }, 300);
      });
    });

    $('modalClose').onclick = closeModal;
    $('modalOverlay').addEventListener('click', e => {
      if (e.target === $('modalOverlay')) closeModal();
    });

    // â”€â”€ Auth â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function tryUnlock() {
      const ok = $('pw').value === PASS;
      $('pwErr').classList.toggle('show', !ok);
      if (!ok) return;
      try {
        const s = $('unlockSound');
        s.loop = true; s.currentTime = 0; s.play();
      } catch(_) {}
      localStorage.setItem(KEY, '1');
      go('1', 'forward');
    }

    function lock() {
      localStorage.removeItem(KEY);
      ORDER.forEach(id => {
        const e = $('s-' + id);
        if (e) e.classList.remove('slide-in','slide-out-left','slide-out-right','enter-from-left');
      });
      $('s-login').classList.add('slide-in');
      current = 'login';
      updateChrome();
      $('pw').value = '';
    }

    // â”€â”€ Result â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function showResult() {
      const r = calc();
      const tier = getTier(r.result);

      go('result', 'forward');

      setTimeout(() => {
        animateNumber($('resNum'), r.result);
        $('resRaw').textContent = 'Uafrundet: ' + r.raw;
        $('resultIcon').textContent = tier.icon;
        $('tierName').textContent = tier.name;
        $('tierDesc').textContent = tier.desc;
      }, 200);
    }

    // â”€â”€ Wire up buttons â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    $('unlockBtn').onclick = tryUnlock;
    $('pw').onkeydown = e => { if (e.key === 'Enter') tryUnlock(); };
    $('lockBtn').onclick = lock;

    $('n1').onclick = () => go('2','forward');
    $('n2').onclick = () => go('3','forward');
    $('n3').onclick = () => go('4','forward');
    $('n4').onclick = () => go('5','forward');
    $('n5').onclick = () => showResult();

    $('b2').onclick = () => go('1','back');
    $('b3').onclick = () => go('2','back');
    $('b4').onclick = () => go('3','back');
    $('b5').onclick = () => go('4','back');

    $('restartBtn').onclick = () => {
      ['vol','ath','atm','sleep','meat','bread','greens','fruit','liquid','water']
        .forEach(id => $(id).value = '');
      fromResult = false;
      go('1','back');
    };

    $('editBtn').onclick = openModal;

    // Enter-key shortcuts
    $('vol').onkeydown   = e => { if (e.key==='Enter') $('n1').click(); };
    $('sleep').onkeydown = e => { if (e.key==='Enter') $('n3').click(); };
    $('water').onkeydown = e => { if (e.key==='Enter') $('n5').click(); };

    // â”€â”€ Auto-unlock â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    if (localStorage.getItem(KEY) === '1') {
      $('s-login').classList.remove('slide-in');
      $('s-1').classList.add('slide-in');
      current = '1';
      updateChrome();
    }
  })();
  </script>
</body>
</html>
